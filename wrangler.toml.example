name = "dreclaw"
main = "src/index.ts"
compatibility_date = "2026-02-22"
compatibility_flags = ["nodejs_compat"]
route = "REPLACE_WITH_WORKER_ROUTE"

[vars]
CODE_EXEC_ENABLED = "true"
NET_FETCH_ENABLED = "true"
PKG_INSTALL_ENABLED = "true"
EXEC_TIMEOUT_MS = "2000"
EXEC_MEMORY_MB = "32"
EXEC_STACK_KB = "512"
EXEC_MAX_HOST_CALLS = "25"
EXEC_MAX_LOG_LINES = "120"
EXEC_MAX_OUTPUT_BYTES = "65536"
NET_MAX_REQUESTS_PER_RUN = "25"
NET_MAX_PARALLEL = "5"
NET_REQUEST_TIMEOUT_MS = "10000"
NET_MAX_RESPONSE_BYTES = "2097152"
NET_MAX_TOTAL_DOWNLOAD_BYTES = "10485760"
NET_MAX_REDIRECTS = "5"
PKG_INSTALL_TIMEOUT_MS = "15000"
PKG_MAX_SPEC_LENGTH = "120"
PKG_MAX_MODULE_BYTES = "3145728"
PKG_MAX_TOTAL_INSTALL_BYTES_PER_RUN = "15728640"
PKG_MAX_INSTALLS_PER_RUN = "5"

[observability]
enabled = true

[[d1_databases]]
binding = "DRECLAW_DB"
database_name = "dreclaw"
database_id = "REPLACE_WITH_D1_DATABASE_ID"

[[durable_objects.bindings]]
name = "SESSION_RUNTIME"
class_name = "SessionRuntime"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["SessionRuntime"]

[[migrations]]
tag = "v2"
new_sqlite_classes = ["Sandbox"]

[[migrations]]
tag = "v3"
deleted_classes = ["Sandbox"]
